var A=(y,c,d)=>new Promise((g,p)=>{var w=s=>{try{h(d.next(s))}catch(m){p(m)}},o=s=>{try{h(d.throw(s))}catch(m){p(m)}},h=s=>s.done?g(s.value):Promise.resolve(s.value).then(w,o);h((d=d.apply(y,c)).next())});import{M as I,a as N,b as U,c as j,u as G,_ as Q,C as H,d as K,N as F,e as O,f as z}from"./layout.vue_vue_type_script_setup_true_lang-BzdwquIT.mjs";import{c as D,_ as R}from"./button.vue_vue_type_script_setup_true_lang-TAr1y4B3.mjs";import"./load-TBZVKhZx.mjs";import{$ as n,c as W,w as J,g as X,b as Y,h as Z,u as ee,s as te,P as ae,a as V}from"./bootstrap-OcJ_7BUG.mjs";import{T as oe}from"./auth-title-BLp0bC9x.mjs";import{_ as $}from"./theme-toggle.vue_vue_type_script_setup_true_lang-7gyQauSK.mjs";import{a6 as B,aG as u,aJ as b,aK as _,aW as f,aa as e,m as r,aI as i,T as se,J as P,aQ as C,ao as M,aX as v,aH as x,aZ as q,a_ as re,S as ne,aU as le,P as ie,b2 as S,a0 as de}from"../jse/index-index-CWuPeoDv.mjs";import{_ as ue}from"./input.vue_vue_type_script_setup_true_lang-BRKEtbUX.mjs";import{_ as ce}from"./input-password.vue_vue_type_script_setup_true_lang-DUiXJGVf.mjs";import{_ as me}from"./checkbox.vue_vue_type_script_setup_true_lang-C1bxzdJW.mjs";import{x as pe}from"./index-6Td_2BJY.mjs";import"./rotate-cw-DTNJrhLe.mjs";const he=D("BookOpenTextIcon",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}],["path",{d:"M6 8h2",key:"30oboj"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M16 12h2",key:"7q9ll5"}]]),fe={class:"w-full sm:mx-auto md:max-w-md"},ge={class:"mt-4 flex items-center justify-between"},we=_("span",{class:"border-input w-[35%] border-b dark:border-gray-600"},null,-1),ve={class:"text-muted-foreground text-center text-xs uppercase"},be=_("span",{class:"border-input w-[35%] border-b dark:border-gray-600"},null,-1),ye={class:"mt-4 flex flex-wrap justify-center"},_e=B({name:"ThirdPartyLogin",__name:"third-party-login",setup(y){return(c,d)=>(u(),b("div",fe,[_("div",ge,[we,_("span",ve,f(e(n)("authentication.thirdPartyLogin")),1),be]),_("div",ye,[r(e($),{class:"mb-3"},{default:i(()=>[r(e(I))]),_:1}),r(e($),{class:"mb-3"},{default:i(()=>[r(e(N))]),_:1}),r(e($),{class:"mb-3"},{default:i(()=>[r(e(U))]),_:1}),r(e($),{class:"mb-3"},{default:i(()=>[r(e(j))]),_:1})])]))}}),ke=["onKeydown"],Me={class:"text-muted-foreground"},Pe={key:0,class:"mb-6 mt-4 flex justify-between"},Le={key:0,class:"flex-center"},$e={key:1,class:"mb-2 mt-4 flex items-center justify-between"},xe={key:0,class:"mt-3 text-center text-sm"},Be=B({name:"AuthenticationLogin",__name:"login",props:{codeLoginPath:{default:"/auth/code-login"},forgetPasswordPath:{default:"/auth/forget-password"},loading:{type:Boolean,default:!1},passwordPlaceholder:{default:""},qrCodeLoginPath:{default:"/auth/qrcode-login"},registerPath:{default:"/auth/register"},showCodeLogin:{type:Boolean,default:!0},showForgetPassword:{type:Boolean,default:!0},showQrcodeLogin:{type:Boolean,default:!0},showRegister:{type:Boolean,default:!0},showRememberMe:{type:Boolean,default:!0},showThirdPartyLogin:{type:Boolean,default:!0},subTitle:{default:""},title:{default:""},usernamePlaceholder:{default:""}},emits:["submit"],setup(y,{emit:c}){const d=c,g=W(),p=`REMEMBER_ME_USERNAME_${location.hostname}`,w=localStorage.getItem(p)||"",o=se({password:"",rememberMe:!!w,submitted:!1,username:w}),h=P(()=>o.submitted&&!o.username?"error":"default"),s=P(()=>o.submitted&&!o.password?"error":"default");function m(){o.submitted=!0,!(h.value!=="default"||s.value!=="default")&&(localStorage.setItem(p,o.rememberMe?o.username:""),d("submit",{password:o.password,username:o.username}))}function k(t){g.push(t)}return(t,a)=>(u(),b("div",{onKeydown:J(X(m,["prevent"]),["enter"])},[C(t.$slots,"title",{},()=>[r(oe,null,{desc:i(()=>[_("span",Me,f(t.subTitle||e(n)("authentication.loginSubtitle")),1)]),default:i(()=>[M(f(t.title||`${e(n)("authentication.welcomeBack")} ðŸ‘‹ðŸ»`)+" ",1)]),_:1})]),r(e(ue),{modelValue:o.username,"onUpdate:modelValue":a[0]||(a[0]=l=>o.username=l),autofocus:!1,"error-tip":e(n)("authentication.usernameTip"),label:e(n)("authentication.username"),placeholder:t.usernamePlaceholder||e(n)("authentication.username"),status:h.value,name:"username",required:"",type:"text"},null,8,["modelValue","error-tip","label","placeholder","status"]),r(e(ce),{modelValue:o.password,"onUpdate:modelValue":a[1]||(a[1]=l=>o.password=l),"error-tip":e(n)("authentication.passwordTip"),label:e(n)("authentication.password"),placeholder:t.passwordPlaceholder||e(n)("authentication.password"),status:s.value,name:"password",required:"",type:"password"},null,8,["modelValue","error-tip","label","placeholder","status"]),t.showRememberMe||t.showForgetPassword?(u(),b("div",Pe,[t.showRememberMe?(u(),b("div",Le,[r(e(me),{checked:o.rememberMe,"onUpdate:checked":a[2]||(a[2]=l=>o.rememberMe=l),name:"rememberMe"},{default:i(()=>[M(f(e(n)("authentication.rememberMe")),1)]),_:1},8,["checked"])])):v("",!0),t.showForgetPassword?(u(),b("span",{key:1,class:"text-primary hover:text-primary-hover active:text-primary-active cursor-pointer text-sm font-normal",onClick:a[3]||(a[3]=l=>k(t.forgetPasswordPath))},f(e(n)("authentication.forgetPassword")),1)):v("",!0)])):v("",!0),r(e(R),{loading:t.loading,class:"w-full",onClick:m},{default:i(()=>[M(f(e(n)("common.login")),1)]),_:1},8,["loading"]),t.showCodeLogin||t.showQrcodeLogin?(u(),b("div",$e,[t.showCodeLogin?(u(),x(e(R),{key:0,class:"w-1/2",variant:"outline",onClick:a[4]||(a[4]=l=>k(t.codeLoginPath))},{default:i(()=>[M(f(e(n)("authentication.mobileLogin")),1)]),_:1})):v("",!0),t.showQrcodeLogin?(u(),x(e(R),{key:1,class:"ml-4 w-1/2",variant:"outline",onClick:a[5]||(a[5]=l=>k(t.qrCodeLoginPath))},{default:i(()=>[M(f(e(n)("authentication.qrcodeLogin")),1)]),_:1})):v("",!0)])):v("",!0),C(t.$slots,"third-party-login",{},()=>[t.showThirdPartyLogin?(u(),x(_e,{key:0})):v("",!0)]),C(t.$slots,"to-register",{},()=>[t.showRegister?(u(),b("div",xe,[M(f(e(n)("authentication.accountTip"))+" ",1),_("span",{class:"text-primary hover:text-primary-hover active:text-primary-active cursor-pointer text-sm font-normal",onClick:a[6]||(a[6]=l=>k(t.registerPath))},f(e(n)("authentication.createAccount")),1)])):v("",!0)])],40,ke))}}),Re=B({name:"LoginExpiredModal",__name:"login-expired-modal",props:q({avatar:{default:""},codeLoginPath:{},forgetPasswordPath:{},loading:{type:Boolean},passwordPlaceholder:{},qrCodeLoginPath:{},registerPath:{},showCodeLogin:{type:Boolean},showForgetPassword:{type:Boolean},showQrcodeLogin:{type:Boolean},showRegister:{type:Boolean},showRememberMe:{type:Boolean},showThirdPartyLogin:{type:Boolean},subTitle:{},title:{},usernamePlaceholder:{}},{open:{type:Boolean},openModifiers:{}}),emits:q(["submit"],["update:open"]),setup(y,{emit:c}){const d=y,g=c,p=re(y,"open"),w=pe(d,g),[o,h]=G();return ne(()=>p.value,s=>{h.setState({isOpen:s})}),(s,m)=>(u(),b("div",null,[r(e(o),{closable:!1,"close-on-click-modal":!1,"close-on-press-escape":!1,footer:!1,"fullscreen-button":!1,header:!1,class:"border-none px-10 py-6 text-center shadow-xl sm:w-[600px] sm:rounded-2xl md:h-[unset]"},{default:i(()=>[r(e(Q),{src:s.avatar,class:"mx-auto mb-6 size-20"},null,8,["src"]),r(Be,le(e(w),{"show-forget-password":!1,"show-register":!1,"show-remember-me":!1,"sub-title":s.$t("authentication.loginAgainSubTitle"),title:s.$t("authentication.loginAgainTitle")}),null,16,["sub-title","title"])]),_:1})]))}}),He=B({__name:"basic",setup(y){const c=ie([{avatar:"https://avatar.vercel.sh/vercel.svg?text=VB",date:"3å°æ—¶å‰",isRead:!0,message:"æè¿°ä¿¡æ¯æè¿°ä¿¡æ¯æè¿°ä¿¡æ¯",title:"æ”¶åˆ°äº† 14 ä»½æ–°å‘¨æŠ¥"},{avatar:"https://avatar.vercel.sh/1",date:"åˆšåˆš",isRead:!1,message:"æè¿°ä¿¡æ¯æè¿°ä¿¡æ¯æè¿°ä¿¡æ¯",title:"æœ±åå³ å›žå¤äº†ä½ "},{avatar:"https://avatar.vercel.sh/1",date:"2024-01-01",isRead:!1,message:"æè¿°ä¿¡æ¯æè¿°ä¿¡æ¯æè¿°ä¿¡æ¯",title:"æ›²ä¸½ä¸½ è¯„è®ºäº†ä½ "},{avatar:"https://avatar.vercel.sh/satori",date:"1å¤©å‰",isRead:!1,message:"æè¿°ä¿¡æ¯æè¿°ä¿¡æ¯æè¿°ä¿¡æ¯",title:"ä»£åŠžæé†’"}]),d=Y(),g=Z(),p=ee(),w=P(()=>c.value.some(a=>!a.isRead)),o=P(()=>[{handler:()=>{S(ae,{target:"_blank"})},icon:he,text:n("widgets.document")},{handler:()=>{S(V,{target:"_blank"})},icon:U,text:"GitHub"},{handler:()=>{S(`${V}/issues`,{target:"_blank"})},icon:H,text:n("widgets.qa")}]),{loginLoading:h}=te(g),s=P(()=>{var a,l;return(l=(a=d.userInfo)==null?void 0:a.avatar)!=null?l:de.app.defaultAvatar});function m(){return A(this,null,function*(){yield g.logout(!1)})}function k(){c.value=[]}function t(){c.value.forEach(a=>a.isRead=!0)}return(a,l)=>(u(),x(e(z),{onClearPreferencesAndLogout:m},{"user-dropdown":i(()=>{var L,T,E;return[r(e(K),{avatar:s.value,description:(L=e(d).userInfo)==null?void 0:L.email,menus:o.value,"tag-text":(T=e(d).userInfo)==null?void 0:T.roles[0],text:(E=e(d).userInfo)==null?void 0:E.realName,onLogout:m},null,8,["avatar","description","menus","tag-text","text"])]}),notification:i(()=>[r(e(F),{dot:w.value,notifications:c.value,onClear:k,onMakeAll:t},null,8,["dot","notifications"])]),extra:i(()=>[r(e(Re),{open:e(p).loginExpired,"onUpdate:open":l[0]||(l[0]=L=>e(p).loginExpired=L),avatar:s.value,loading:e(h),"password-placeholder":"123456","username-placeholder":"vben",onSubmit:e(g).authLogin},null,8,["open","avatar","loading","onSubmit"])]),"lock-screen":i(()=>[r(e(O),{avatar:s.value,onToLogin:m},null,8,["avatar"])]),_:1}))}});export{He as default};
