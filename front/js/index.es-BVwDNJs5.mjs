var Te=Object.defineProperty,ye=Object.defineProperties;var Se=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var oe=Math.pow,ne=(e,n,t)=>n in e?Te(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,_=(e,n)=>{for(var t in n||(n={}))re.call(n,t)&&ne(e,t,n[t]);if(F)for(var t of F(n))ae.call(n,t)&&ne(e,t,n[t]);return e},ie=(e,n)=>ye(e,Se(n));var G=(e,n)=>{var t={};for(var r in e)re.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&F)for(var r of F(e))n.indexOf(r)<0&&ae.call(e,r)&&(t[r]=e[r]);return t};var U=(e,n,t)=>new Promise((r,a)=>{var s=i=>{try{o(t.next(i))}catch(u){a(u)}},c=i=>{try{o(t.throw(i))}catch(u){a(u)}},o=i=>i.done?r(i.value):Promise.resolve(i.value).then(s,c);o((t=t.apply(e,n)).next())});import{I as fe}from"./bootstrap-t35vpcz_.mjs";import{m as de,R as ve,J as y,a8 as z,P as S,ab as H,ac as k,S as q,U as Ce}from"../jse/index-index-CqEm-tRS.mjs";var Ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"};function ue(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?Object(arguments[n]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),r.forEach(function(a){xe(e,a,t[a])})}return e}function xe(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var me=function(n,t){var r=ue({},n,t.attrs);return de(fe,ue({},r,{icon:Ae}),null)};me.displayName="MoreOutlined";me.inheritAttrs=!1;var Le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M793 242H366v-74c0-6.7-7.7-10.4-12.9-6.3l-142 112a8 8 0 000 12.6l142 112c5.2 4.1 12.9.4 12.9-6.3v-74h415v470H175c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h618c35.3 0 64-28.7 64-64V306c0-35.3-28.7-64-64-64z"}}]},name:"rollback",theme:"outlined"};function le(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?Object(arguments[n]):{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),r.forEach(function(a){$e(e,a,t[a])})}return e}function $e(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var ge=function(n,t){var r=le({},n,t.attrs);return de(fe,le({},r,{icon:Le}),null)};ge.displayName="RollbackOutlined";ge.inheritAttrs=!1;const Ie={},he=Symbol("GLOBAL_OPTIONS_PROVIDE_KEY"),pe=()=>Ie,j=e=>e,je=Object.prototype.toString,_e=e=>je.call(e),Ne=e=>_e(e)==="[object Object]",Q=e=>Array.isArray(e),B=e=>e!==null&&typeof e=="object",ee=e=>e instanceof Function,M=e=>e==null,te=typeof window=="undefined",be=()=>{var e;return te||M((e=window.document)===null||e===void 0?void 0:e.visibilityState)?!0:window.document.visibilityState==="visible"},Be=()=>{var e,n;return(e=!te&&((n=window.navigator)===null||n===void 0?void 0:n.onLine))!==null&&e!==void 0?e:!0},Y=()=>new Promise(()=>{}),se=function(e,n){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const r=n.replace(/\[(\d+)\]/g,".$1").split(".");let a=e;for(const s of r)if(a=Object(a)[s],a===void 0)return t;return a},$=e=>Ce(e)?e.value:e,Me=e=>B(e)?Object.assign(Q(e)?[]:{},e):e,K=new Map,De=e=>M(e)?void 0:K.get(e),Fe=(e,n,t)=>{const r=K.get(e);r!=null&&r.timer&&clearTimeout(r.timer);const a=setTimeout(()=>K.delete(e),n);K.set(e,ie(_({},t),{timer:a}))};function Oe(e,n,t){let r,a,s,c,o,i,u=0,m=!1,f=!1,O=!0;const d=!n&&n!==0&&typeof window.requestAnimationFrame=="function";if(typeof e!="function")throw new TypeError("Expected a function");n=+n||0,B(t)&&(m=!!t.leading,f="maxWait"in t,s=f?Math.max(+t.maxWait||0,n):s,O="trailing"in t?!!t.trailing:O);function P(l){const T=r,A=a;return r=a=void 0,u=l,c=e.apply(A,T),c}function v(l,T){return d?(window.cancelAnimationFrame(o),window.requestAnimationFrame(l)):setTimeout(l,T)}function w(l){if(d)return window.cancelAnimationFrame(l);clearTimeout(l)}function g(l){return u=l,o=v(R,n),m?P(l):c}function b(l){const T=l-i,A=l-u,I=n-T;return f?Math.min(I,s-A):I}function h(l){const T=l-i,A=l-u;return i===void 0||T>=n||T<0||f&&A>=s}function R(){const l=Date.now();if(h(l))return E(l);o=v(R,b(l))}function E(l){return o=void 0,O&&r?P(l):(r=a=void 0,c)}function C(){o!==void 0&&w(o),u=0,r=i=a=o=void 0}function x(){return o===void 0?c:E(Date.now())}function L(){return o!==void 0}function p(){const l=Date.now(),T=h(l);for(var A=arguments.length,I=new Array(A),D=0;D<A;D++)I[D]=arguments[D];if(r=I,a=this,i=l,T){if(o===void 0)return g(i);if(f)return o=v(R,n),P(i)}return o===void 0&&(o=v(R,n)),c}return p.cancel=C,p.flush=x,p.pending=L,p}function Pe(e,n){for(const t in n)if(n[t]!==void 0){if(!B(n[t])||!B(e[t])||!(t in e)){e[t]=n[t];continue}(Ne(n[t])||Q(n[t]))&&Pe(e[t],n[t])}}function ce(e){const n=Object.assign({},e);for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];if(!r.length)return n;for(const s of r)Pe(n,s);return n}function Ke(e,n,t){let r=!0,a=!0;if(typeof e!="function")throw new TypeError("Expected a function");return B(t)&&(r="leading"in t?!!t.leading:r,a="trailing"in t?!!t.trailing:a),Oe(e,n,{leading:r,trailing:a,maxWait:n})}var We=j((e,n)=>{let{debounceInterval:t,debounceOptions:r,manual:a}=n;const s=S(!1),c=S(),o=y(()=>r),i=y(()=>$(t)),u=S(e.context.runAsync);return a||(s.value=!0),k(m=>{M(i.value)||(c.value=Oe(f=>f(),i.value,o.value),e.context.runAsync=function(){for(var f=arguments.length,O=new Array(f),d=0;d<f;d++)O[d]=arguments[d];return new Promise((P,v)=>{s.value?(s.value=!1,u.value(...O).then(P).catch(v)):c.value(()=>{u.value(...O).then(P).catch(v)})})},m(()=>{var f;(f=c.value)===null||f===void 0||f.cancel(),e.context.runAsync=u.value}))}),{onCancel(){var m;(m=c.value)===null||m===void 0||m.cancel()}}}),Qe=j((e,n)=>{let{errorRetryCount:t=0,errorRetryInterval:r=0}=n;const a=S(),s=S(0),c=y(()=>$(t)),o=y(()=>$(r));let i=!1;const u=()=>{s.value=0},m=y(()=>{if(o.value)return o.value;const d=1e3,w=Math.floor(Math.random()*oe(2,Math.min(s.value,9))+1);return d*w}),f=()=>{let d;const P=c.value===-1,v=s.value<c.value;return(P||v)&&(P||(s.value+=1),d=setTimeout(()=>{i=!0,e.context.refresh()},m.value)),()=>d&&clearTimeout(d)},O=()=>{a.value&&a.value()};return{onBefore(){i||u(),i=!1,O()},onSuccess(){u()},onError(){a.value=f()},onCancel(){u(),O()}}}),Ve=j((e,n)=>{let{ready:t=S(!0),manual:r,defaultParams:a=[]}=n;return q(t,s=>{!r&&s&&e.context.run(...a)},{flush:"sync"}),{onBefore(){if(!(ee(t)?t():t.value))return e.loading.value=!1,{isBreak:!0}}}}),ze=j((e,n)=>{let{refreshDeps:t,refreshDepsAction:r,manual:a}=n;if(t===void 0||Q(t)&&t.length===0)return{};const s=Q(t)?t:[t];return q(s,()=>{r?r():!a&&e.context.refresh()}),{}}),Ge=j((e,n)=>{let{throttleInterval:t,throttleOptions:r}=n;const a=S(),s=y(()=>$(t)),c=y(()=>r),o=S(e.context.runAsync);return k(i=>{if(M(t))return{};a.value=Ke(u=>u(),s.value,c.value),e.context.runAsync=function(){for(var u=arguments.length,m=new Array(u),f=0;f<u;f++)m[f]=arguments[f];return new Promise((O,d)=>{a.value(()=>{o.value(...m).then(O).catch(d)})})},i(()=>{var u;(u=a.value)===null||u===void 0||u.cancel(),e.context.runAsync=o.value})}),{onCancel(){var i;(i=a.value)===null||i===void 0||i.cancel()}}});const Ue=(e,n)=>t=>{Object.keys(t).forEach(r=>{e[r].value=t[r]}),n.forEach(r=>r(e))},He=(e,n)=>()=>{let t=n;for(let r=e.length;r-- >0;)t=e[r](t);return t()},Ye=(e,n,t)=>{var r,a;const{initialData:s,onSuccess:c,onError:o,onBefore:i,onAfter:u}=n,m=S((r=void 0)!==null&&r!==void 0?r:!1),f=H((a=void 0)!==null&&a!==void 0?a:s),O=H(void 0),d=S(void 0),P=S([]),v=H("pending"),w={},g=Ue({status:v,loading:m,data:f,error:O,params:d},[]),b=function(R){for(var E=arguments.length,C=new Array(E>1?E-1:0),x=1;x<E;x++)C[x-1]=arguments[x];if(R==="onQuery"){const L=P.value.map(p=>p.onQuery).filter(Boolean);return{servicePromise:He(L,C[0])()}}else{const L=P.value.map(p=>{var l;return(l=p[R])===null||l===void 0?void 0:l.call(p,...C)});return Object.assign({},...L)}},h=S(0);return w.runAsync=function(){return U(this,arguments,function*(){for(var R=arguments.length,E=new Array(R),C=0;C<R;C++)E[C]=arguments[C];g({loading:!0,params:E,status:"pending"}),h.value+=1;const x=h.value,{isBreak:L,breakResult:p=Y()}=b("onBefore",E);if(L)return g({status:"settled"}),p;i==null||i(E);try{const l=()=>new Promise(I=>I(e(...d.value)));let{servicePromise:T}=b("onQuery",l);T||(T=l());const A=yield T;return x!==h.value?Y():(g({data:A,loading:!1,error:void 0,status:"settled"}),b("onSuccess",A,E),c==null||c(A,E),x===h.value&&b("onAfter",E,A,void 0),u==null||u(E),A)}catch(l){if(x!==h.value)return Y();throw g({loading:!1,error:l,status:"settled"}),b("onError",l,E),o==null||o(l,E),x===h.value&&b("onAfter",E,void 0,l),u==null||u(E),l}})},w.run=function(){w.runAsync(...arguments).catch(R=>{o||console.error(R)})},w.cancel=()=>{h.value+=1,g({loading:!1}),b("onCancel")},w.refresh=()=>{w.run(...d.value||[])},w.refreshAsync=()=>w.runAsync(...d.value||[]),w.mutate=R=>{const E=ee(R)?R(f.value):R,C=Me(E);g({data:C}),b("onMutate",C)},{status:v,loading:m,data:f,error:O,params:d,plugins:P,context:w}};function Je(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0;const r=ve(he,{}),a=_(_(_({},pe()),r),n),{manual:s=!1,defaultParams:c=[]}=a,o=Ye(e,a);if(o.plugins.value=t.map(i=>i(o,a)),!s){const i=o.params.value||c;o.context.run(...i)}return z(()=>{o.context.cancel()}),{loading:o.loading,data:o.data,error:o.error,params:o.params,cancel:o.context.cancel,refresh:o.context.refresh,refreshAsync:o.context.refreshAsync,mutate:o.context.mutate,run:o.context.run,runAsync:o.context.runAsync}}const W=new Map,Xe=(e,n)=>{W.set(e,n),n.then(t=>(W.delete(e),t)).catch(()=>{W.delete(e)})},Ze=e=>W.get(e),N=new Map,ke=(e,n)=>{N.has(e)&&N.get(e).forEach(t=>t(n))},qe=(e,n)=>(N.has(e)?N.get(e).push(n):N.set(e,[n]),()=>{const t=N.get(e).indexOf(n);N.get(e).splice(t,1)});var et=j((e,n)=>{let{cacheKey:t,cacheTime:r=6e5,staleTime:a=0,getCache:s,setCache:c}=n;if(!t)return{};const o=ee(t)?t:()=>t,i=S(()=>{});let u;const m=g=>s?s(g):De(g),f=(g,b,h)=>{c?c(g,h):Fe(g,b,h),ke(g,h.data)},O=g=>a===-1||g+a>new Date().getTime(),d=(g,b)=>Object.prototype.hasOwnProperty.call(g,b),P=g=>{const b=o(g);return qe(b,h=>{e.data.value=h})},v=o(),w=m(v);return w&&d(w,"data")&&(e.data.value=w.data,e.params.value=w.params),v&&(i.value=P()),z(()=>{i.value()}),{onBefore(g){const b=o(g),h=m(b);if(!h||!d(h,"data"))return{};if(O(h.time))return e.data.value=h.data,e.loading.value=!1,{isBreak:!0,breakResult:h.data};e.data.value=h.data},onQuery(g){const b=e.params.value,h=o(b);let R=Ze(h);return R&&R!==u?()=>R:(R=g(),u=R,Xe(h,R),()=>R)},onSuccess(g,b){const h=o(b);h&&(i.value(),f(h,r,{data:g,params:b,time:new Date().getTime()}),i.value=P(b))},onMutate(g){const b=o(e.params.value);b&&(i.value(),f(b,r,{data:g,params:e.params.value,time:new Date().getTime()}),i.value=P(e.params.value))}}});function tt(e){let n,t;class r extends Promise{constructor(s){super(s),this.cancel=()=>{t(),clearTimeout(n)}}}return new r(a=>{t=a,n=setTimeout(t,e)})}function J(){return new Date().getTime()}var nt=j((e,n)=>{let{loadingDelay:t=0,loadingKeep:r=0}=n;const a=S(()=>{}),s=y(()=>$(t)),c=y(()=>$(r));let o=0,i={};const u=()=>{let m;return s.value&&(m=setTimeout(()=>{e.status.value==="pending"&&(e.loading.value=!0)},s.value)),()=>m&&clearTimeout(m)};return{onBefore(){e.loading.value=!s.value,a.value(),a.value=u(),o=J()},onQuery(m){if(!c.value)return()=>m();i=tt(c.value+s.value);const f=()=>U(this,null,function*(){try{const d=yield m();return J()-o<=s.value&&i.cancel(),Promise.resolve(d)}catch(d){return J()-o<=s.value&&i.cancel(),Promise.reject(d)}}),O=Promise.allSettled([f(),i]).then(d=>{const P=d[0];return P.status==="fulfilled"?P.value:Promise.reject(P.reason)});return()=>O},onCancel(){a.value()},onAfter(){a.value()}}}),X;const we=new Set,Re=new Set,Ee=new Set,V=(e,n)=>{let t;switch(e){case"FOCUS_LISTENER":t=we;break;case"RECONNECT_LISTENER":t=Ee;break;case"VISIBLE_LISTENER":t=Re;break}if(!t.has(n))return t.add(n),()=>{t.delete(n)}},Z=e=>{e.forEach(n=>{n()})};!te&&(X=window)!==null&&X!==void 0&&X.addEventListener&&(window.addEventListener("visibilitychange",()=>{be()&&Z(Re)},!1),window.addEventListener("focus",()=>Z(we),!1),window.addEventListener("online",()=>Z(Ee),!1));var rt=j((e,n)=>{let{pollingInterval:t,pollingWhenHidden:r=!1,pollingWhenOffline:a=!1,errorRetryCount:s=0}=n;const c=S(),o=S(!1),i=y(()=>$(t)),u=y(()=>$(s)),m=[],f=v=>{v&&m.push(v)},O=()=>(r||be())&&(a||Be()),d=v=>{if(e.error.value&&u.value!==0)return;let w;if(!M(i.value)&&i.value>=0)if(O())w=setTimeout(v,i.value);else{o.value=!0;return}return()=>w&&clearTimeout(w)},P=()=>{o.value&&O()&&(e.context.refresh(),o.value=!1)};return q(i,()=>{c.value&&(c.value(),c.value=d(()=>e.context.refresh()))}),r||f(V("VISIBLE_LISTENER",P)),a||f(V("RECONNECT_LISTENER",P)),z(()=>{m.forEach(v=>v())}),{onBefore(){var v;(v=c.value)===null||v===void 0||v.call(c)},onCancel(){var v;(v=c.value)===null||v===void 0||v.call(c)},onAfter(){c.value=d(()=>e.context.refresh())}}});const at=(e,n)=>{let t=!1;return function(){t||(t=!0,e(...arguments),setTimeout(()=>{t=!1},n))}};var ot=j((e,n)=>{let{refreshOnWindowFocus:t=!1,refocusTimespan:r=5e3}=n;const a=y(()=>$(t)),s=y(()=>$(r)),c=[],o=u=>{u&&c.push(u)},i=()=>{c.forEach(u=>u())};return k(()=>{if(i(),a.value){const u=at(e.context.refresh,s.value);o(V("VISIBLE_LISTENER",u)),o(V("FOCUS_LISTENER",u))}}),z(()=>{i()}),{}});function it(e,n,t){return Je(e,n,[nt,Qe,We,rt,Ge,ot,ze,Ve,et])}function ct(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t={currentKey:"current",pageSizeKey:"pageSize",totalKey:"total",totalPageKey:"totalPage"},r=ve(he,{}),x=n,{pagination:a}=x,s=G(x,["pagination"]),{currentKey:c,pageSizeKey:o,totalKey:i,totalPageKey:u}=ce(t,pe().pagination||{},r.pagination||{},a||{}),m=ce({defaultParams:[{[c]:1,[o]:10}]},s),L=it(e,m),{data:f,params:O,run:d}=L,P=G(L,["data","params","run"]),v=p=>{const[l,...T]=O.value||[],I=[_(_({},l),p),...T];d(...I)},w=p=>{v({[c]:p})},g=p=>{v({[o]:p})},b=(p,l)=>{v({[c]:p,[o]:l})},h=y(()=>se(f.value,i,0)),R=y({get:()=>{var p,l,T;return(p=(l=O.value)===null||l===void 0||(T=l[0])===null||T===void 0?void 0:T[c])!==null&&p!==void 0?p:m.defaultParams[0][c]},set:p=>{w(p)}}),E=y({get:()=>{var p,l,T;return(p=(l=O.value)===null||l===void 0||(T=l[0])===null||T===void 0?void 0:T[o])!==null&&p!==void 0?p:m.defaultParams[0][o]},set:p=>{g(p)}}),C=y(()=>se(f.value,u,Math.ceil(h.value/E.value)));return _({data:f,params:O,current:R,pageSize:E,total:h,totalPage:C,run:d,changeCurrent:w,changePageSize:g,changePagination:b},P)}export{me as M,ge as R,ct as u};
